"use strict";function errorAlert(o){alert(o)}function tipsAlert(o){alert(o)}var appState={router:null,isLogin:!0},domain="/api";window.location.href.indexOf("192.168")===-1&&window.location.href.indexOf(":900")===-1&&window.location.href.indexOf("localhost")===-1||(domain="http://"+window.location.hostname+":7999");var makeGet=function(o){return function(e,t){$.get(domain+o,e).done(function(o){paseJson(o,t)}).fail(function(o){errorAlert(o)})}},makePost=function(o){return function(e,t){$.post(domain+o,e).done(function(o){paseJson(o,t)}).fail(function(o){errorAlert(o)})}},paseJson=function(o,e){return"string"==typeof o&&(o=JSON.parse(o)),1!=o.code?errorAlert("服务器出错"+o.msg):void e(o.data)},apiForLogin=makePost("/login"),apiForMemeberIndex=makeGet("/memeber"),loginView=Vue.extend({template:$("#login-template").html(),mounted:function(){$("body").addClass("login-bg")},destoryed:function(){$("body").removeClass("login-bg")},data:function(){return{username:"",password:""}},methods:{login:function(){return this.username?this.password?void appState.router.push("/staff"):tipsAlert("密码不能为空"):tipsAlert("用户名不能为空")}}});Vue.component("login-view",loginView);var staffView=Vue.extend({template:$("#staff-template").html(),data:function(){return{currentGoods:{},goodsArray:[]}},mounted:function(){this.goodsArray=[{imgUrl:"http://imgsize.ph.126.net/?imgurl=http://img1.ph.126.net/pKa8Kttj0AsOd7TijP9CRA==/6632036435442880504.jpg_188x188x1.jpg",title:"吹风机一台",rank:400}]},methods:{exchange:function(){$(".exchange-confirm").modal("show")},sureConfirm:function(){$(".exchange-ok").modal("show")},closeConfirm:function(){$(".exchange-modal").modal("hide")},showExchangeHistory:function(){$(".exchange-history").modal("show")}}});Vue.component("staff-view",loginView),console.log("'Allo 'Allo!");var routes=[{path:"/login",component:loginView},{path:"/staff",component:staffView}],router=new VueRouter({routes:routes});router.beforeEach(function(o,e,t){"/login"===e.path&&$("body").removeClass("login-bg"),"/login"===o.path&&$("body").addClass("login-bg"),t()}),appState.router=router;var app=new Vue({router:router}).$mount("#app-start");router.push("/login");